@inject TodoClient Client


@if (!string.IsNullOrEmpty(CurrentUser))
{
    <NavBar CurrentUser="@CurrentUser" LoggedOut="@Logout" />
    <TodoList OnForbidden="@Logout" />
}
else
{
    <LogInForm OnLoggedIn="@HandleLogin" />
}
@code {
    [Parameter] public string? CurrentUser { get; set; }

    void HandleLogin(string newUsername)
    {
        CurrentUser = newUsername;
    }

    async Task Logout()
    {
        if (await Client.LogoutAsync())
        {
            CurrentUser = null;
        }
    }
}
